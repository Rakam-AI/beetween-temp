# T2.7 - Implement Request Submission Use Case


**Depends on:** T2.4, T2.6
**Blocks:** T2.13

**Context:**
Submitting a request moves it from DRAFT to PENDING (first validation step). All mandatory fields (global + step 1) must be filled.

Reference:
- `API_Technical Specification V1.md` > POST /requests/{id}/submission
- `Agent_Technical Specification V1.0.md` > "Etape 2: Soumission pour validation"

**Objective:**
Create the SubmitRequestUseCase.

**Instructions:**

1. **Create `SubmitRequestUseCase` interface and `SubmitRequestService` implementation:**
   - Load request (validate exists, DRAFT status, user is creator)
   - Load associated workflow
   - Collect required fields: workflow.globalRequiredFields + workflow.steps[0].requiredFields
   - Call `request.submit(requiredFields)` which validates and transitions
   - Save request
   - Publish `RequestSubmitted` event
   - The event should trigger notification to step 1 validators (via Pulsar topic - consumers handle the notification)

2. **Write unit tests:**
   - Submit with all fields filled → success
   - Submit with missing mandatory fields → error listing missing fields
   - Submit when not DRAFT → error
   - Submit by non-creator → error

**Acceptance Criteria:**
- Submission validates ALL mandatory fields (global + step 1)
- Returns clear error listing missing field names if validation fails
- Status transitions to PENDING, currentStepIndex to 1
- History entry added
- Event published
