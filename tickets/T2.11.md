# T2.11 - Implement Request Archive Use Case


**Depends on:** T2.4, T2.6
**Blocks:** T2.13

**Context:**
Archiving handles two scenarios: abandoning a draft (by creator) and archiving an approved/rejected request (by creator or admin).

Reference:
- `API_Technical Specification V1.md` > POST /requests/{id}/archive
- `Agent_Technical Specification V1.0.md` > "Etape 1b", "Etape 4a", "Etape 4b"

**Objective:**
Create the ArchiveRequestUseCase.

**Instructions:**

1. **Create `ArchiveRequestUseCase` interface and `ArchiveRequestService` implementation:**
   - Load request (validate exists)
   - If status == DRAFT:
     - Only the creator can archive (abandon)
     - Call `request.archive()` → status = ABANDONED
     - Publish `RequestAbandoned` event
   - If status in [APPROVED, REJECTED]:
     - Creator OR admin can archive
     - Call `request.archive()` → status = ARCHIVED
     - Publish `RequestArchived` event
   - If status == PENDING: Cannot archive (return error)

2. **Write unit tests:**
   - Archive DRAFT by creator → ABANDONED
   - Archive APPROVED by creator → ARCHIVED
   - Archive REJECTED by admin → ARCHIVED
   - Archive PENDING → error
   - Archive DRAFT by non-creator → error

**Acceptance Criteria:**
- DRAFT → ABANDONED (creator only)
- APPROVED/REJECTED → ARCHIVED (creator or admin)
- PENDING cannot be archived
- Correct events published
- History entries recorded
