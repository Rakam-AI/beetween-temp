# T2.18 - Implement Domain Unit Tests


**Depends on:** T2.3, T2.4
**Blocks:** None (quality gate)

**Context:**
The domain layer must have comprehensive unit tests covering all business rules and state transitions.

**Objective:**
Achieve > 80% test coverage on domain layer.

**Instructions:**

1. **`WorkflowTest.kt`:** (if not already fully done in T2.3)
   - All creation validations
   - All status transitions
   - All update rules
   - AdditionalField validation rules

2. **`RequestTest.kt`:** (if not already fully done in T2.4)
   - Complete lifecycle: CREATE → SUBMIT → APPROVE (multi-step) → ARCHIVE
   - Complete lifecycle: CREATE → SUBMIT → REJECT → ARCHIVE
   - DRAFT abandonment: CREATE → ABANDON
   - ALL validation mode with multiple validators
   - ONE validation mode with single validator
   - Missing required fields on submission
   - Update tracking in history (field change detection)
   - Duplicate request from rejected

3. **`TransitionEngineTest.kt`** (if applicable):
   - Complex multi-step scenarios
   - Edge cases with concurrent validators

**Acceptance Criteria:**
- > 80% line coverage on domain layer
- All state transitions tested (both happy path and error cases)
- All validation rules tested
- Tests are clear and serve as documentation of business rules
