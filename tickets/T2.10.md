# T2.10 - Implement Request Comment Use Case


**Depends on:** T2.4, T2.6
**Blocks:** T2.13

**Context:**
Users authorized as commentators at the current workflow step can add comments to a pending request.

Reference:
- `API_Technical Specification V1.md` > POST /requests/{id}/comment
- `Agent_Technical Specification V1.0.md` > "Etape 3c: Ajout de commentaires"

**Objective:**
Create the CommentRequestUseCase.

**Instructions:**

1. **Create `CommentRequestUseCase` interface and `CommentRequestService` implementation:**
   - Load request (validate exists, PENDING status)
   - Load workflow, validate user is a commentator at current step (or is a validator, or is the creator)
   - Comment must not be blank
   - Call `request.addComment(userId, userName, comment)`
   - Save request

2. **Write unit tests:**
   - Comment by authorized commentator → success
   - Comment by validator → success
   - Comment by creator → success
   - Comment by unauthorized user → error
   - Empty comment → error
   - Comment when not PENDING → error

**Acceptance Criteria:**
- Comments recorded in history
- Multiple user types can comment (commentators, validators, creator)
- Comment text can be HTML (stored as-is, no sanitization at domain level)
